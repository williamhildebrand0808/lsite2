<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Personen-Datenbank</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
    font-family: Arial, sans-serif;
    background-color: #111;
    color: #0ff;
    margin: 0;
    padding: 20px;
}
h1 { text-align:center; color: orange; }
input, textarea, select, button {
    display:block;
    margin-bottom:10px;
    padding:6px;
    width: 100%;
    max-width: 400px;
    border:1px solid cyan;
    background-color: black;
    color: cyan;
}
button {
    cursor:pointer;
}
#personForm { margin-bottom:30px; }
.personCard {
    border:1px solid cyan;
    padding:10px;
    margin-bottom:10px;
}
.personCard h3 { margin:0 0 5px 0; color: orange; }
.personCard button { width:auto; margin-right:5px; margin-top:5px; }
#searchInput { width: 300px; }
</style>
</head>
<body>

<h1>Personen-Datenbank</h1>

<div id="personForm">
    <h2>Person hinzufügen / bearbeiten</h2>
    <input type="text" id="nameInput" placeholder="Name">
    <input type="number" id="ageInput" placeholder="Alter">
    <input type="text" id="cityInput" placeholder="Stadt">
    <input type="text" id="countryInput" placeholder="Land">
    <input type="text" id="instagramInput" placeholder="Instagram / Weitere Infos">
    <button id="saveButton">Speichern</button>
</div>

<div>
    <input type="text" id="searchInput" placeholder="Suche nach Name, Stadt oder Land..." oninput="updateList()">
</div>

<div id="personList"></div>

<script>
// Daten aus LocalStorage laden
let people = JSON.parse(localStorage.getItem("people")) || [];
let editIndex = null;

const nameInput = document.getElementById("nameInput");
const ageInput = document.getElementById("ageInput");
const cityInput = document.getElementById("cityInput");
const countryInput = document.getElementById("countryInput");
const instagramInput = document.getElementById("instagramInput");
const saveButton = document.getElementById("saveButton");
const personList = document.getElementById("personList");
const searchInput = document.getElementById("searchInput");

// Funktion zum Anzeigen der Liste
function renderList(){
    personList.innerHTML = "";
    people.forEach((p, i) => {
        const div = document.createElement("div");
        div.className = "personCard";
        div.innerHTML = `<h3>${p.name}</h3>
                         <p><b>Alter:</b> ${p.age || '-'}</p>
                         <p><b>Stadt:</b> ${p.city || '-'}</p>
                         <p><b>Land:</b> ${p.country || '-'}</p>
                         <p><b>Info:</b> ${p.instagram || '-'}</p>
                         <button onclick="editPerson(${i})">Bearbeiten</button>
                         <button onclick="deletePerson(${i})">Löschen</button>`;
        personList.appendChild(div);
    });
}

// Speichern / Hinzufügen
saveButton.onclick = function(){
    const person = {
        name: nameInput.value.trim(),
        age: ageInput.value.trim(),
        city: cityInput.value.trim(),
        country: countryInput.value.trim(),
        instagram: instagramInput.value.trim()
    };
    if(!person.name) return alert("Name muss ausgefüllt sein!");
    if(editIndex !== null){
        people[editIndex] = person;
        editIndex = null;
    } else {
        people.push(person);
    }
    localStorage.setItem("people", JSON.stringify(people));
    clearForm();
    renderList();
    updateList();
}

// Formular leeren
function clearForm(){
    nameInput.value = "";
    ageInput.value = "";
    cityInput.value = "";
    countryInput.value = "";
    instagramInput.value = "";
}

// Bearbeiten
function editPerson(i){
    editIndex = i;
    const p = people[i];
    nameInput.value = p.name;
    ageInput.value = p.age;
    cityInput.value = p.city;
    countryInput.value = p.country;
    instagramInput.value = p.instagram;
}

// Löschen
function deletePerson(i){
    if(confirm("Willst du diese Person wirklich löschen?")){
        people.splice(i,1);
        localStorage.setItem("people", JSON.stringify(people));
        renderList();
        updateList();
    }
}

// Suche
function updateList(){
    const q = searchInput.value.toLowerCase();
    personList.innerHTML = "";
    people.forEach((p,i)=>{
        if(p.name.toLowerCase().includes(q) || p.city.toLowerCase().includes(q) || p.country.toLowerCase().includes(q)){
            const div = document.createElement("div");
            div.className="personCard";
            div.innerHTML = `<h3>${p.name}</h3>
                             <p><b>Alter:</b> ${p.age || '-'}</p>
                             <p><b>Stadt:</b> ${p.city || '-'}</p>
                             <p><b>Land:</b> ${p.country || '-'}</p>
                             <p><b>Info:</b> ${p.instagram || '-'}</p>
                             <button onclick="editPerson(${i})">Bearbeiten</button>
                             <button onclick="deletePerson(${i})">Löschen</button>`;
            personList.appendChild(div);
        }
    });
}

// Initial render
renderList();

</script>

</body>
</html>
